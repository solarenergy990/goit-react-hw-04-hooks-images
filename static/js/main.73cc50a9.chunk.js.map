{"version":3,"sources":["components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Container/Container.module.css","components/App/App.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","components/Button/Button.js","components/Modal/Modal.js","components/Container/Container.js","services/image-api.js","utils/dataExtractor.js","components/App/App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","ImageGalleryItem","image","onModalOpen","smallImg","imgTag","largeImg","className","s","src","alt","onClick","evt","console","log","target","attributes","value","ImageGalleryItemImage","imageGallery","this","props","imageArr","ImageGallery","map","imageId","Component","defaultProps","propTypes","array","isRequired","Searchbar","state","imageName","handleNameChange","setState","currentTarget","toLowerCase","handleSubmit","preventDefault","trim","onSubmit","alert","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Button","modalRoot","document","querySelector","Modal","onEscDown","code","onModalClose","onBackdropClick","window","addEventListener","removeEventListener","createPortal","Overlay","Container","children","container","imageAPI","fetchImage","query","page","url","fetch","then","response","ok","json","hits","dataExtractor","pictures","id","webformatURL","largeImageURL","tags","App","currentPage","searchQuery","isLoading","error","openModal","handleFormSubmit","fetchPictures","prevState","length","scrollDown","scrollTo","top","documentElement","scrollHeight","behavior","onLoadMore","setLargeImg","imgLink","onLargeImgOpen","modalToggler","prevProps","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.73cc50a9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__21w7t\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__21Vb0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__OrJiP\",\"Modal\":\"Modal_Modal__3DQWS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__22CpL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1frTN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__2GSnt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1podF\"};","import React from \"react\";\nimport s from \"./ImageGalleryItem.module.css\";\nimport PropTypes from \"prop-types\";\n\nconst ImageGalleryItem = ({ image, onModalOpen }) => {\n  // console.log(image);\n  const { smallImg, imgTag, largeImg } = image;\n\n  return (\n    <li className={s.ImageGalleryItem}>\n      <img\n        src={smallImg}\n        alt={imgTag}\n        onClick={(evt) => {\n          console.log(evt.target);\n          onModalOpen(evt.target.attributes[\"data-large\"].value);\n        }}\n        className={s.ImageGalleryItemImage}\n        data-large={largeImg}\n      />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  image: PropTypes.shape({\n    imageId: PropTypes.number.isRequired,\n    imgTag: PropTypes.string.isRequired,\n    smallImg: PropTypes.string.isRequired,\n    largeImg: PropTypes.string.isRequired,\n  }),\n\n  onModalOpen: PropTypes.func.isRequired,\n};\nexport default ImageGalleryItem;\n","import React, { Component } from \"react\";\nimport ImageGalleryItem from \"./ImageGalleryItem/ImageGalleryItem\";\nimport propTypes from \"prop-types\";\nimport s from \"./ImageGallery.module.css\";\n// import imageAPI from \"../services/image-api\";\n\nclass imageGallery extends Component {\n  static defaultProps = { imageArr: propTypes.array.isRequired };\n  static propTypes = {\n    imageArr: propTypes.arrayOf(propTypes.object),\n    onModalOpen: propTypes.func,\n  };\n  render() {\n    // console.log(this.props.imageArr);\n    const { imageArr, onModalOpen } = this.props;\n    return (\n      <div>\n        <ul className={s.ImageGallery}>\n          {imageArr &&\n            imageArr.map((image) => {\n              return (\n                <ImageGalleryItem\n                  image={image}\n                  key={image.imageId}\n                  onModalOpen={onModalOpen}\n                />\n              );\n            })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default imageGallery;\n","import React, { Component } from \"react\";\nimport s from \"./Searchbar.module.css\";\nimport propTypes from \"prop-types\";\n\nclass Searchbar extends Component {\n  state = {\n    imageName: \"\",\n  };\n\n  static propTypes = { onSubmit: propTypes.func };\n\n  handleNameChange = (evt) => {\n    this.setState({ imageName: evt.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    if (this.state.imageName.trim() === \"\") {\n      alert(\"Enter search query in the search field\"); //toastify here\n      return;\n    }\n    this.props.onSubmit(this.state.imageName);\n    this.setState({ imageName: \"\" });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleNameChange}\n            value={this.state.imageName}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from \"react\";\nimport s from \"./Button.module.css\";\nimport PropTypes from \"prop-types\";\n\nconst Button = ({ onClick }) => {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load More\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\nexport default Button;\n","import React, { Component } from \"react\";\nimport s from \"./Modal.module.css\";\nimport { createPortal } from \"react-dom\";\nimport propTypes from \"prop-types\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nclass Modal extends Component {\n  static propTypes = { onModalClose: propTypes.func.isRequired };\n\n  componentDidMount() {\n    console.log(\"component did mount\");\n    window.addEventListener(\"keydown\", this.onEscDown);\n  }\n\n  onEscDown = (evt) => {\n    if (evt.code === \"Escape\") {\n      this.props.onModalClose();\n    }\n  };\n  onBackdropClick = (evt) => {\n    if (evt.currentTarget === evt.target) {\n      this.props.onModalClose();\n    }\n  };\n\n  componentWillUnmount() {\n    console.log(\" component will unmount\");\n    window.removeEventListener(\"keydown\", this.onEscDown);\n  }\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.onBackdropClick}>\n        <div className={s.Modal}>\n          <img src={this.props.src} alt={this.props.alt} />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\nexport default Modal;\n","import React from \"react\";\nimport s from \"./Container.module.css\";\nimport PropTypes from \"prop-types\";\n\nconst Container = (props) => {\n  const { children } = props;\n  return <div className={s.container}>{children}</div>;\n};\n\nContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Container;\n","const API_KEY = \"21934405-57162f124158c436f0bdddd5d\";\nconst BASE_URL = \"https://pixabay.com/api\";\n\n// https://pixabay.com/api/?key=21934405-57162f124158c436f0bdddd5d&q=yellow+flowers&image_type=photo\n\nfunction fetchImage(query, page) {\n  // console.log(\"api arguments:\", query, page);\n  const url = `${BASE_URL}/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&page=${page}&per_page=12`;\n\n  return fetch(url)\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n    })\n    .then(({ hits }) => {\n      return hits;\n    });\n}\n\nconst imageAPI = { fetchImage };\n\nexport default imageAPI;\n","const dataExtractor = (pictures) => {\n  //   console.log(pictures);\n  return pictures.map(\n    ({\n      id: imageId,\n      webformatURL: smallImg,\n      largeImageURL: largeImg,\n      tags: imgTag,\n    }) => ({\n      imageId,\n      smallImg,\n      largeImg,\n      imgTag,\n    })\n  );\n};\n\nexport default dataExtractor;\n","import React, { Component } from \"react\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\nimport ImageGallery from \"../ImageGallery/ImageGallery\";\nimport Searchbar from \"../Searchbar/Searchbar\";\nimport Button from \"../Button/Button\";\nimport Modal from \"../Modal/Modal\";\nimport Container from \"../Container/Container\";\nimport s from \"./App.module.css\";\nimport imageAPI from \"../../services/image-api\";\n\nimport dataExtractor from \"../../utils/dataExtractor\";\n\nclass App extends Component {\n  state = {\n    pictures: [],\n    currentPage: 1,\n    searchQuery: \"\",\n    isLoading: false,\n    error: null,\n    openModal: false,\n  };\n\n  handleFormSubmit = (searchQuery) => {\n    const page = 1;\n\n    // console.log(searchQuery);\n    this.setState({\n      searchQuery,\n      currentPage: page,\n      pictures: [],\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { currentPage, searchQuery } = this.state;\n\n    if (\n      searchQuery !== prevState.searchQuery ||\n      currentPage !== prevState.currentPage\n    ) {\n      this.fetchPictures(searchQuery, currentPage);\n    }\n    if (currentPage > 1) {\n      this.scrollDown();\n    }\n  }\n\n  fetchPictures = (query, page) => {\n    return imageAPI.fetchImage(query, page).then((pictures) => {\n      this.setState((prevState) => ({\n        pictures: [...prevState.pictures, ...dataExtractor(pictures)],\n\n        isLoading: false,\n      }));\n      if (this.state.pictures.length === 0) {\n        alert(\"Nothing found!\");\n      }\n    });\n  };\n\n  scrollDown = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  onLoadMore = () => {\n    this.setState((prevState) => ({\n      currentPage: prevState.currentPage + 1,\n      isLoading: true,\n    }));\n  };\n\n  setLargeImg = (imgLink) => {\n    // console.log(imgLink);\n    return this.setState(({ largeImg }) => ({ largeImg: imgLink }));\n  };\n\n  onLargeImgOpen = (imgLink) => {\n    // console.log(imgLink);\n    this.setLargeImg(imgLink);\n    this.modalToggler();\n  };\n\n  modalToggler = () => {\n    this.setState(({ openModal }) => ({ openModal: !openModal }));\n  };\n\n  render() {\n    const { pictures, openModal, isLoading, largeImg, searchQuery } =\n      this.state;\n\n    return (\n      <div className={s.App}>\n        {openModal && (\n          <Modal\n            onModalClose={this.modalToggler}\n            src={largeImg}\n            alt={searchQuery}\n          />\n        )}\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <Container>\n          {pictures.length > 0 && (\n            <ImageGallery\n              imageArr={pictures}\n              onModalOpen={this.onLargeImgOpen}\n            />\n          )}\n        </Container>\n\n        <Container>\n          {isLoading && (\n            <Loader type=\"Grid\" color=\"#00BFFF\" height={80} width={80} />\n          )}\n          {pictures.length > 0 && !isLoading && (\n            <Button onClick={this.onLoadMore} />\n          )}\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"modern-normalize/modern-normalize.css\";\nimport \"./index.css\";\nimport App from \"./components/App/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2p7Zt\",\"SearchForm\":\"Searchbar_SearchForm__2cyte\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1Zbyj\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__3oNjX\",\"SearchFormInput\":\"Searchbar_SearchFormInput__LFha7\"};"],"sourceRoot":""}